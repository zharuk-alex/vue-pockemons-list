import{r as F,o as H,d as j,I as k,m as J,a as O,b as X,c as Q,e as Y,f as Z,g as ee,h as ae,u as te,i as ie,j as ne,p as le,k as S,l as se,n as L,t as m,q as re,s as l,V as _,v as p,w as x,x as w,y as N,_ as M,z as C,A as q,B as ue,C as oe,D as ce,E as ve,F as R,G as B,H as de,J as D,K as ge,L as fe,M as me,N as he}from"./index.1b387430.js";function be(){const e=F([]);H(()=>e.value=[]);function u(s,P){e.value[P]=s}return{refs:e,updateRef:u}}const Le=j({name:"VPagination",props:{activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:k,default:"$first"},prevIcon:{type:k,default:"$prev"},nextIcon:{type:k,default:"$next"},lastIcon:{type:k,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...J(),...O(),...X(),...Q(),...Y(),...Z({tag:"nav"}),...ee(),...ae({variant:"text"})},emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,u){let{slots:s,emit:P}=u;const t=te(e,"modelValue"),{t:v,n:V}=ie(),{isRtl:h}=ne(),{themeClasses:I}=le(e),$=F(-1);S(void 0,{scoped:!0});const{resizeRef:z}=se(a=>{if(!a.length)return;const{target:i,contentRect:n}=a[0],c=i.querySelector(".v-pagination__list > *");if(!c)return;const d=n.width,b=c.offsetWidth+parseFloat(getComputedStyle(c).marginRight)*2,W=e.showFirstLastPage?5:3;$.value=Math.max(0,Math.floor(+((d-b*W)/b).toFixed(2)))}),r=L(()=>parseInt(e.length,10)),o=L(()=>parseInt(e.start,10)),g=L(()=>e.totalVisible?parseInt(e.totalVisible,10):$.value>=0?$.value:r.value),E=L(()=>{if(r.value<=0||isNaN(r.value)||r.value>Number.MAX_SAFE_INTEGER)return[];if(g.value<=1)return[t.value];if(r.value<=g.value)return x(r.value,o.value);const a=g.value%2===0,i=a?g.value/2:Math.floor(g.value/2),n=a?i:i+1,c=r.value-i;if(n-t.value>=0)return[...x(Math.max(1,g.value-1),o.value),e.ellipsis,r.value];if(t.value-c>=(a?1:0)){const d=g.value-1,b=r.value-d+o.value;return[o.value,e.ellipsis,...x(d,b)]}else{const d=Math.max(1,g.value-3),b=d===1?t.value:t.value-Math.ceil(d/2)+o.value;return[o.value,e.ellipsis,...x(d,b),e.ellipsis,r.value]}});function y(a,i,n){a.preventDefault(),t.value=i,n&&P(n,i)}const{refs:U,updateRef:T}=be();S({VPaginationBtn:{color:m(e,"color"),border:m(e,"border"),density:m(e,"density"),size:m(e,"size"),variant:m(e,"variant"),rounded:m(e,"rounded"),elevation:m(e,"elevation")}});const G=L(()=>E.value.map((a,i)=>{const n=c=>T(c,i);if(typeof a=="string")return{isActive:!1,key:`ellipsis-${i}`,page:a,props:{ref:n,ellipsis:!0,icon:!0,disabled:!0}};{const c=a===t.value;return{isActive:c,key:a,page:V(a),props:{ref:n,ellipsis:!1,icon:!0,disabled:!!e.disabled||e.length<2,color:c?e.activeColor:e.color,ariaCurrent:c,ariaLabel:v(c?e.currentPageAriaLabel:e.pageAriaLabel,i+1),onClick:d=>y(d,a)}}}})),f=L(()=>{const a=!!e.disabled||t.value<=o.value,i=!!e.disabled||t.value>=o.value+r.value-1;return{first:e.showFirstLastPage?{icon:h.value?e.lastIcon:e.firstIcon,onClick:n=>y(n,o.value,"first"),disabled:a,ariaLabel:v(e.firstAriaLabel),ariaDisabled:a}:void 0,prev:{icon:h.value?e.nextIcon:e.prevIcon,onClick:n=>y(n,t.value-1,"prev"),disabled:a,ariaLabel:v(e.previousAriaLabel),ariaDisabled:a},next:{icon:h.value?e.prevIcon:e.nextIcon,onClick:n=>y(n,t.value+1,"next"),disabled:i,ariaLabel:v(e.nextAriaLabel),ariaDisabled:i},last:e.showFirstLastPage?{icon:h.value?e.firstIcon:e.lastIcon,onClick:n=>y(n,o.value+r.value-1,"last"),disabled:i,ariaLabel:v(e.lastAriaLabel),ariaDisabled:i}:void 0}});function A(){var a;const i=t.value-o.value;(a=U.value[i])==null||a.$el.focus()}function K(a){a.key===w.left&&!e.disabled&&t.value>e.start?(t.value=t.value-1,N(A)):a.key===w.right&&!e.disabled&&t.value<o.value+r.value-1&&(t.value=t.value+1,N(A))}return re(()=>l(e.tag,{ref:z,class:["v-pagination",I.value],role:"navigation","aria-label":v(e.ariaLabel),onKeydown:K,"data-test":"v-pagination-root"},{default:()=>[l("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&l("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[s.first?s.first(f.value.first):l(_,p({_as:"VPaginationBtn"},f.value.first),null)]),l("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[s.prev?s.prev(f.value.prev):l(_,p({_as:"VPaginationBtn"},f.value.prev),null)]),G.value.map((a,i)=>l("li",{key:a.key,class:["v-pagination__item",{"v-pagination__item--is-active":a.isActive}],"data-test":"v-pagination-item"},[s.item?s.item(a):l(_,p({_as:"VPaginationBtn"},a.props),{default:()=>[a.page]})])),l("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[s.next?s.next(f.value.next):l(_,p({_as:"VPaginationBtn"},f.value.next),null)]),e.showFirstLastPage&&l("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[s.last?s.last(f.value.last):l(_,p({_as:"VPaginationBtn"},f.value.last),null)])])]})),{}}}),pe={name:"BasePagination",props:{modelValue:{type:Number,required:!0},length:{type:Number,required:!0}}},Pe={class:"text-center"};function ye(e,u,s,P,t,v){return C(),q("div",Pe,[l(Le,p({"model-value":s.modelValue,length:s.length,rounded:"circle",color:"white"},e.$attrs),null,16,["model-value","length"])])}const _e=M(pe,[["render",ye]]),{mapGetters:ke,mapActions:xe,mapMutations:Ve}=ue("pokemons"),Ie={components:{ItemsList:oe,BasePagination:_e},data:()=>({pageCurrent:null,itemsPerListPage:16}),computed:{...ke(["list","countPokemonsInDB","spritesUrl"]),formatedList(){return[...this.list].map(e=>({...e,id:ce(e.url),src:ve(this.spritesUrl,e.url)}))},totalListPages(){return Math.ceil(this.countPokemonsInDB/this.itemsPerListPage)}},methods:{...xe(["fetchList"]),...Ve(["setList"]),async updateListData(){let e=this.itemsPerListPage*(this.pageCurrent-1);const u=await this.fetchList({limit:this.itemsPerListPage,offset:e});this.$router.replace({query:{page:this.pageCurrent}}),this.setList(u)},setActivePage(){var u;let e=(u=this.$route.query)==null?void 0:u.page;e!=null?this.pageCurrent=parseInt(e):this.pageCurrent=1}},beforeMount(){this.setActivePage()},watch:{pageCurrent(){this.updateListData()}}},$e=he("h3",{class:"text-h3"},"Pokemons",-1);function Be(e,u,s,P,t,v){const V=R("ItemsList"),h=R("BasePagination");return C(),q(ge,null,[l(de,null,{default:B(()=>[l(D,{cols:"12"},{default:B(()=>[$e]),_:1})]),_:1}),l(V,{items:v.formatedList},null,8,["items"]),l(D,{cols:"12",sm:"8",lg:"6",class:"mx-auto"},{default:B(()=>[v.totalListPages>1?(C(),fe(h,{key:0,length:v.totalListPages,modelValue:e.pageCurrent,"onUpdate:modelValue":u[0]||(u[0]=I=>e.pageCurrent=I),modelModifiers:{sync:!0}},null,8,["length","modelValue"])):me("",!0)]),_:1})],64)}const Ae=M(Ie,[["render",Be]]);export{Ae as default};
